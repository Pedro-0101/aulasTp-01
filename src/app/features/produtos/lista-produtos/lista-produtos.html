<section class="catalogo">
  <header class="barradetarefas">
    <h2>catalogo</h2>
    <div>
      <button class="btnPromo" [class.ativo]="apenasPromo()" (click)="alternarPromo()">
        @if (apenasPromo()) {
          mostrar Todos
        }
        @else {
          somente promocoes
        }
      </button>
      <button type="button" class="btn primary" (click)="onCreateProduct('/produtos/novo')"> + Novo Produto</button>
    </div>
    <select [value]="categoriaSelecionada()" (change)="selecionarCategoria($event)">
      <option value="">-- Todas as categorias --</option>
      @if (categorias()) {
      @for (cat of categorias(); track $index) {
      <option [value]="cat">{{ cat }}</option>
      }
      }
    </select>
  </header>
  <h2>Produtos</h2>

  @if(loading()) {
  <p>Carregando produtos...</p>
  }
  @else {
  @if (prodExibidos().length === 0) {
  <p class="vazio">Nenhum produto encontrado para o filtro atual</p>
  }@else {
  <div class="grid">
    @for (p of prodExibidos(); track p.id) {
    <app-card-produto [produto]="p" (view)="onViewProduct($event)" (add)="onAddToCart($event)">
    </app-card-produto>
    }
  </div>
  }
  }
</section>